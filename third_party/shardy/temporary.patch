diff --git a/third_party/llvm/generated.patch b/third_party/llvm/generated.patch
index a044bff..05dccdb 100644
--- a/third_party/llvm/generated.patch
+++ b/third_party/llvm/generated.patch
@@ -2,64 +2,47 @@ Auto generated patch. Do not edit or delete it, even if empty.
 diff -ruN --strip-trailing-cr a/utils/bazel/llvm-project-overlay/mlir/BUILD.bazel b/utils/bazel/llvm-project-overlay/mlir/BUILD.bazel
 --- a/utils/bazel/llvm-project-overlay/mlir/BUILD.bazel
 +++ b/utils/bazel/llvm-project-overlay/mlir/BUILD.bazel
-@@ -2337,6 +2337,7 @@
-     srcs = ["include/mlir/Dialect/AMX/AMX.td"],
-     includes = ["include"],
-     deps = [
-+        ":BuiltinDialectTdFiles",
-         ":LLVMOpsTdFiles",
-         ":SideEffectInterfacesTdFiles",
+@@ -9969,6 +9969,8 @@
+         ":OpenMPToLLVMIRTranslation",
+         ":ToLLVMIRTranslation",
+         "//llvm:AsmParser",
++        "//llvm:Core",
++        "//llvm:Linker",
+         "//llvm:Support",
+         "//llvm:X86AsmParser",
      ],
-@@ -2360,6 +2361,20 @@
-             "include/mlir/Dialect/AMX/AMXDialect.cpp.inc",
-         ),
-         (
-+            [
-+                "-gen-typedef-decls",
-+                "-typedefs-dialect=amx",
-+            ],
-+            "include/mlir/Dialect/AMX/AMXTypes.h.inc",
-+        ),
-+        (
-+            [
-+                "-gen-typedef-defs",
-+                "-typedefs-dialect=amx",
-+            ],
-+            "include/mlir/Dialect/AMX/AMXTypes.cpp.inc",
-+        ),
-+        (
-             ["-gen-op-decls"],
-             "include/mlir/Dialect/AMX/AMX.h.inc",
-         ),
-@@ -2388,6 +2403,7 @@
-         ":IR",
-         ":LLVMDialect",
-         ":SideEffectInterfaces",
-+        "//llvm:Support",
+@@ -10092,34 +10094,6 @@
+         "//llvm:Support",
      ],
  )
+-
+-cc_binary(
+-    name = "mlir-spirv-cpu-runner",
+-    srcs = ["tools/mlir-spirv-cpu-runner/mlir-spirv-cpu-runner.cpp"],
+-    deps = [
+-        ":ArithDialect",
+-        ":BuiltinToLLVMIRTranslation",
+-        ":ExecutionEngineUtils",
+-        ":FuncDialect",
+-        ":FuncToLLVM",
+-        ":GPUDialect",
+-        ":GPUToSPIRV",
+-        ":GPUTransforms",
+-        ":LLVMDialect",
+-        ":LLVMToLLVMIRTranslation",
+-        ":MemRefDialect",
+-        ":MlirJitRunner",
+-        ":Pass",
+-        ":SPIRVConversion",
+-        ":SPIRVDialect",
+-        ":SPIRVToLLVM",
+-        ":SPIRVTransforms",
+-        ":ToLLVMIRTranslation",
+-        "//llvm:Core",
+-        "//llvm:Linker",
+-        "//llvm:Support",
+-    ],
+-)
  
-@@ -2398,6 +2414,7 @@
-     includes = ["include"],
-     deps = [
-         ":AMXDialect",
-+        ":ConvertToLLVMInterface",
-         ":IR",
-         ":LLVMCommonConversion",
-         ":LLVMDialect",
-@@ -4858,6 +4875,7 @@
-     deps = [
-         ":AffineTransformOps",
-         ":ArithToLLVM",
-+        ":AMXTransforms",
-         ":BufferizationTransformOps",
-         ":BuiltinToLLVMIRTranslation",
-         ":ComplexToLLVM",
-@@ -5965,6 +5983,7 @@
-     deps = [
-         ":ArithDialect",
-         ":ConversionPassIncGen",
-+        ":DialectUtils",
-         ":IR",
-         ":Pass",
-         ":SPIRVConversion",
+ cc_library(
+     name = "TableGen",
diff --git a/third_party/llvm/workspace.bzl b/third_party/llvm/workspace.bzl
index 897304c..4614d85 100644
--- a/third_party/llvm/workspace.bzl
+++ b/third_party/llvm/workspace.bzl
@@ -4,8 +4,8 @@ load("//third_party:repo.bzl", "tf_http_archive")
 
 def repo(name):
     """Imports LLVM."""
-    LLVM_COMMIT = "f548d39c3c751446d124c08769080214680d53ba"
-    LLVM_SHA256 = "66872d95602de81098608858f799969579ac35122e028f30a82c53e4c68d9a7f"
+    LLVM_COMMIT = "51e8f822f39174eaf83b1d5798de329518970b02"
+    LLVM_SHA256 = "49101ccabccb4cfc3b03aeaff716acb4f125f5e28f3e4e52ac142b7ebd779f1c"
 
     tf_http_archive(
         name = name,
